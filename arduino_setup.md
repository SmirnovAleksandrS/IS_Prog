# **Arduino Test Setup — Быстрый старт**

## **Необходимые условия**

1. **Arduino Nano**, подключённая по USB
2. **Python 3.8+** с активированным виртуальным окружением
3. **PlatformIO CLI**, установленный в системе

---

## **Установка**

```bash
pip install -r requirements.txt
```

## **Запуск теста**

```bash
.\run.bat
```

**Скрипт выполняет:**

1. Компиляцию и загрузку прошивки Arduino
2. Ожидание 3 секунды (Arduino перезагружается)
3. Запуск 20 тестовых испытаний
4. Вывод результатов

---

## **Ожидаемый вывод**

```
✅ Стенд отвечает
✅ Испытание #1: Tg=100нс, Delay=0нс → Успех
➖ Испытание #2: Tg=80нс, Delay=0нс → Нет эффекта
...
✅ Кампания завершена. Всего испытаний: 20
```

---

## **Устранение неполадок**

**Загрузка прошивки не удалась?**

* Закройте Serial Monitor в Arduino IDE
* Проверьте USB-кабель
* Убедитесь, что выбран правильный COM-порт

**Arduino не отвечает?**

* Подождите 3 секунды после загрузки
* Нажмите кнопку Reset на Arduino
* Повторно запустите `.\run.bat`

**Если проблемы сохраняются**
см. файл **`TROUBLESHOOTING.md`**.

---

## **Файлы**

* `run.bat` — сборка, загрузка и запуск теста
* `config_test.yaml` — конфигурация теста (20 испытаний)
* `arduino/src/main.cpp` — код прошивки
* `arduino/test_protocol.py` — ручная проверка протокола

---

## **Следующие шаги**

После успешного теста:

```bash
# Запуск полной тестовой кампании (2000 испытаний)
python -m ub.cli run --config config.yaml

# Генерация визуализации
python -m ub.cli report --config config.yaml
```

Результаты будут сохранены в каталоге:
`runs/arduino_test/`
